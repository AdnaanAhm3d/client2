import React, { useContext } from 'react'

import { useState, useRef, useEffect } from 'react'
import { DefaultContext } from '../Contexts/DefaultContext'

const PasswordPop = () => {
  const { password, setPassword, text, setText, access, setAccess } =
    useContext(DefaultContext)

  // const [password, setPassword] = useState('Tsm@123')
  // const [text, setText] = useState('')
  const passwordRef = useRef(null)
  const handlePassword = (e) => {
    e.preventDefault()
    if (text === password) {
      console.log('page has been made available')
      setText('')
      setAccess(true)
    } else {
      console.log(`password incorrect`)
      setText('')
    }
  }
  return (
    <>
      <div className='main-absolute'>
        <div className='password-popup'>
          <div className='password-section'>
            <form action='submit' onSubmit={handlePassword}>
              <svg
                width='240'
                height='327'
                viewBox='0 0 240 327'
                fill='none'
                xmlns='http://www.w3.org/2000/svg'
                className='lock'
              >
                <g clip-path='url(#clip0_780_5500)'>
                  <path
                    d='M45.7202 130.07H75.4202V89.33C75.4202 77.5756 80.0896 66.3026 88.4013 57.991C96.7129 49.6794 107.986 45.01 119.74 45.01C131.495 45.01 142.768 49.6794 151.079 57.991C159.391 66.3026 164.06 77.5756 164.06 89.33V130.07H193.76V89.33C193.76 69.704 185.964 50.8818 172.086 37.0041C158.208 23.1264 139.386 15.33 119.76 15.33C100.134 15.33 81.312 23.1264 67.4343 37.0041C53.5566 50.8818 45.7602 69.704 45.7602 89.33V130.07H45.7202ZM127.39 252.39V280.2C127.39 282.229 126.584 284.175 125.15 285.609C123.715 287.044 121.769 287.85 119.74 287.85C117.711 287.85 115.766 287.044 114.331 285.609C112.896 284.175 112.09 282.229 112.09 280.2V252.39C104.227 250.513 97.3256 245.816 92.6963 239.188C88.067 232.56 86.0316 224.464 86.9763 216.435C87.9211 208.406 91.7802 201.003 97.8215 195.631C103.863 190.259 111.666 187.291 119.75 187.291C127.835 187.291 135.638 190.259 141.679 195.631C147.72 201.003 151.579 208.406 152.524 216.435C153.469 224.464 151.433 232.56 146.804 239.188C142.175 245.816 135.274 250.513 127.41 252.39H127.39ZM132.24 207.79C129.349 204.901 125.545 203.103 121.477 202.704C117.408 202.304 113.328 203.328 109.929 205.6C106.531 207.872 104.026 211.251 102.84 215.163C101.654 219.075 101.861 223.277 103.426 227.054C104.991 230.83 107.817 233.947 111.422 235.874C115.028 237.8 119.189 238.417 123.198 237.619C127.208 236.822 130.816 234.659 133.409 231.499C136.003 228.339 137.42 224.378 137.42 220.29C137.423 217.968 136.967 215.668 136.078 213.523C135.189 211.378 133.885 209.429 132.24 207.79ZM90.7302 130.07H148.73V89.33C148.73 81.6387 145.675 74.2625 140.236 68.8239C134.798 63.3854 127.422 60.33 119.73 60.33C112.039 60.33 104.663 63.3854 99.2241 68.8239C93.7856 74.2625 90.7302 81.6387 90.7302 89.33V130.07ZM209.06 130.38C217.47 131.529 225.181 135.68 230.77 142.069C236.359 148.457 239.449 156.652 239.47 165.14V291.53C239.454 300.832 235.754 309.748 229.18 316.328C222.605 322.909 213.692 326.616 204.39 326.64H35.0702C25.7737 326.616 16.8648 322.913 10.2912 316.339C3.71754 309.765 0.0139938 300.856 -0.00976562 291.56V165.14C0.0110894 156.652 3.10109 148.457 8.69012 142.069C14.2792 135.68 21.9901 131.529 30.4002 130.38V89.32C30.4002 65.6309 39.8107 42.912 56.5615 26.1612C73.3122 9.41047 96.0311 0 119.72 0C143.409 0 166.128 9.41047 182.879 26.1612C199.63 42.912 209.04 65.6309 209.04 89.32V130.38H209.06ZM204.39 145.38H35.0702C29.8395 145.406 24.8308 147.497 21.134 151.198C17.4371 154.898 15.3513 159.909 15.3302 165.14V291.53C15.3513 296.761 17.4371 301.772 21.134 305.472C24.8308 309.173 29.8395 311.264 35.0702 311.29H204.4C209.634 311.269 214.648 309.18 218.349 305.479C222.051 301.778 224.139 296.764 224.16 291.53V165.14C224.139 159.906 222.051 154.892 218.349 151.191C214.648 147.49 209.634 145.401 204.4 145.38H204.39Z'
                    fill='black'
                  />
                </g>
                <defs>
                  <clipPath id='clip0_780_5500'>
                    <rect width='239.47' height='326.61' fill='white' />
                  </clipPath>
                </defs>
              </svg>

              <label htmlFor=''>This project is locked</label>
              <input
                type='text'
                value={text}
                onChange={(e) => setText(e.target.value)}
                id=''
                placeholder='Enter Password'
              />
              <button>SUBMIT</button>
            </form>
          </div>
        </div>
      </div>
    </>
  )
}

export default PasswordPop
